## Ystar直播

### 项目描述: 基于Netty搭建自研IM服务器，特定路由转发功能实现定向客户端通信，自研分布式唯一ID生成器，基于ShardingJdbc对用户中台分表操作，支持亿级用户数据存取，根据压力模型拆解服务边界，使用MQ解耦削峰向下游服务传递，功能包括消息互发、直播打赏、主播PK等。

### 技术栈：SpringCloud、Netty、Dubbo、RabbitMQ、Redis、MySQL等
- 自研 IM 服务器，基于推拉模型实现在线/离线均可获取直播间全程消息，设计ACK重试机制保障消息正确送达
- 基于数据库号段模式自研分布式唯一ID生成器，使用CAS+版本号机制解决号段重复加载问题
- 扩展Dubbo SPI机制，实现消息向特定的用户所在IM转发，避免消息风暴，提高 IM 的可靠性
- 使用MQ、线程池等技术，高并发场景采用多线程或流量削峰执行，提高了约50%的执行速度
- 搭建MySQL主从集群，实现读写分离，延迟双删解决主从一致性问题，提高系统在高并发场景下的可靠性
- 针对多处先查缓存再改数据如余额，PK进度条等，通过分布式锁和Lua脚本保证俩个操作的原子性
- 单机环境下，4核8G服务器Jmeter每1500次并发请求平均响应时间在14ms，错误率在0.81%，吞吐量在1728/s左右
